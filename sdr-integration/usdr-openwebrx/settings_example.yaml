# Example OpenWebRX+ Configuration for USDR Device
# 
# This file shows how to configure a USDR (Wavelet Lab Micro SDR) device
# in your OpenWebRX+ settings.yaml file.
#
# Copy the relevant sections to your /etc/openwebrx/settings.yaml file.

# SDR Device Configuration
sdr_devices:
  usdr:
    type: usdr
    name: "USDR (Wavelet Lab)"
    # SoapySDR device string - can include additional parameters
    # Examples:
    #   device: "driver=usdr"
    #   device: "driver=usdr,bus=usb"
    #   device: "driver=usdr,fe=lms6002d"
    device: "driver=usdr"
    
    # Enable/disable this device
    enabled: true
    
    # Keep device running at all times (useful for devices with slow startup)
    always-on: false
    
    # Run background services (WSPR, FT8, etc.) on this device
    services: true
    
    # Device gain settings
    # For USDR with LMS6002D, gain stages are: LNA (0-6), VGA1 (5-31), VGA2 (0-60)
    rf_gain: 30
    
    # Frequency correction in PPM (parts per million)
    ppm: 0
    
    # Optional: Log level for debugging (0-5)
    loglevel: 3
    
    # Optional: RX bandwidth filter
    rx_bw: 2500000
    
    # Device profiles - different frequency/mode configurations
    profiles:
      # 2m Amateur Band Profile
      2m_fm:
        name: "2m FM (144-148 MHz)"
        center_freq: 146000000
        samp_rate: 2048000
        start_freq: 146520000
        start_mod: nfm
        antenna: "RX"
        
      # 70cm Amateur Band Profile  
      70cm_fm:
        name: "70cm FM (430-440 MHz)"
        center_freq: 435000000
        samp_rate: 2048000
        start_freq: 433920000
        start_mod: nfm
        antenna: "RX"
        
      # ISM Band Profile (433 MHz)
      ism_433:
        name: "ISM 433 MHz"
        center_freq: 433920000
        samp_rate: 1024000
        start_freq: 433920000
        start_mod: nfm
        antenna: "RX"
        
      # Airband Profile
      airband:
        name: "Airband (118-137 MHz)"
        center_freq: 127500000
        samp_rate: 2048000
        start_freq: 121500000
        start_mod: am
        antenna: "RX"
        
      # Marine VHF Profile
      marine_vhf:
        name: "Marine VHF (156-162 MHz)"
        center_freq: 159000000
        samp_rate: 2048000
        start_freq: 156800000
        start_mod: nfm
        antenna: "RX"
        
      # HF Profile (using upconverter, 1-30 MHz)
      hf_bands:
        name: "HF Bands (1-30 MHz)"
        center_freq: 14200000
        samp_rate: 2048000
        start_freq: 14074000
        start_mod: usb
        antenna: "RX"
        
      # Wideband FM Broadcast
      fm_broadcast:
        name: "FM Broadcast (88-108 MHz)"
        center_freq: 98000000
        samp_rate: 2400000
        start_freq: 98100000
        start_mod: wfm
        antenna: "RX"

# Additional USDR Configuration Notes:
#
# 1. USDR Hardware Specifications:
#    - Frequency Range (RX/TX): 250 MHz to 3.8 GHz
#    - Frequency Range (RX-only): 1 MHz to 250 MHz (with upconverter)
#    - Sample Rate: 0.1 MSps to 65 MSps
#    - Channel Bandwidth: 0.5 MHz to 40 MHz
#    - Interface: M.2 2230 A+E key (USB 2.0 & PCIe)
#
# 2. Gain Settings:
#    The USDR uses the LMS6002D RFIC with the following gain stages:
#    - LNA: 0-6 dB
#    - VGA1: 5-31 dB
#    - VGA2: 0-60 dB
#
# 3. Antenna Selection:
#    The USDR has MHF4 RF connectors. Use "RX" for receive antenna.
#
# 4. Troubleshooting:
#    - Verify device detection: SoapySDRUtil --probe="driver=usdr"
#    - Check OpenWebRX logs: journalctl -u openwebrx -f
#    - Increase log level for debugging: loglevel: 5
